<!DOCTYPE html>
<html>
    <body>
        <h1>WebSocket test</h1>
        <!-- all the code is in here, bad style but just getting things working -->
        <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script>
        $(function() {
            var ws = new WebSocket("ws://127.0.0.1:8080/");

            ws.onopen = function() {
                $('#list').append("<li>Trying to open connection</li>");
            };

            ws.onmessage = function (evt) {
                $('#list').append("<li>" + evt.data + "</li>");
            };

            ws.onclose = function() {
                $('#list').append("<li>Connection closed</li>");
            };

            ws.onerror = function(err) {
                alert("Error: " + err);
            };

            $('#sendButton').click(function() {
                console.log("clicked send button");
                ws.send("hey there");
            });
        });
        </script>

        <button id="sendButton">Send Message!</button>

        <ul id="list">

        </ul>
    </body>
</html>